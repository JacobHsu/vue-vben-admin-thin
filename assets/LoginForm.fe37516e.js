import{k as e,aQ as a,aR as t,aS as s,aI as o,aT as n,ac as l,aU as r,r as i,A as m,f as d,t as u,a as c,K as g,o as f,n as p,w as y,v as x,q as S,P as h,X as L,s as _,aV as v,S as b}from"./vendor.3d602f9f.js";/* empty css              *//* empty css              *//* empty css              *//* empty css              */import{_ as w,u as k,a as F,L as C,b as E}from"./LoginFormTitle.92c53835.js";import{c as I,f as R,e as T,g as D}from"./index.e025cb94.js";var P=e({name:"LoginForm",components:{[a.name]:a,[t.name]:t,Checkbox:s,Button:o,Form:n,FormItem:n.Item,Input:l,Divider:r,LoginFormTitle:w,InputPassword:l.Password},setup(){const{t:e}=T(),{notification:a,createErrorModal:t}=D(),{prefixCls:s}=I("login"),o=R(),{setLoginState:n,getLoginState:l}=k(),{getFormRules:r}=F(),g=i(),f=i(!1),p=i(!1),y=m({account:"vben",password:"123456"}),{validForm:x}=E(g),S=d((()=>c(l)===C.LOGIN));return{t:e,prefixCls:s,formRef:g,formData:y,getFormRules:r,rememberMe:p,handleLogin:function(){return n=this,l=null,r=function*(){const n=yield x();if(n)try{f.value=!0;const t=yield o.login(u({password:n.password,username:n.account,mode:"none"}));t&&a.success({message:e("sys.login.loginSuccessTitle"),description:`${e("sys.login.loginSuccessDesc")}: ${t.realName}`,duration:3})}catch(l){t({title:e("sys.api.errorTip"),content:l.message||e("sys.api.networkExceptionMsg"),getContainer:()=>document.body.querySelector(`.${s}`)||document.body})}finally{f.value=!1}},new Promise(((e,a)=>{var t=e=>{try{o(r.next(e))}catch(t){a(t)}},s=e=>{try{o(r.throw(e))}catch(t){a(t)}},o=a=>a.done?e(a.value):Promise.resolve(a.value).then(t,s);o((r=r.apply(n,l)).next())}));var n,l,r},loading:f,setLoginState:n,LoginStateEnum:C,getShow:S}}});P.render=function(e,a,t,s,o,n){const l=g("LoginFormTitle"),r=g("Input"),i=g("FormItem"),m=g("InputPassword"),d=g("Checkbox"),u=g("ACol"),c=g("Button"),w=g("ARow"),k=g("Form");return f(),p(b,null,[y(S(l,{class:"enter-x"},null,512),[[x,e.getShow]]),y(S(k,{class:"p-4 enter-x",model:e.formData,rules:e.getFormRules,ref:"formRef",onKeypress:v(e.handleLogin,["enter"])},{default:h((()=>[S(i,{name:"account",class:"enter-x"},{default:h((()=>[S(r,{size:"large",value:e.formData.account,"onUpdate:value":a[1]||(a[1]=a=>e.formData.account=a),placeholder:e.t("sys.login.userName")},null,8,["value","placeholder"])])),_:1}),S(i,{name:"password",class:"enter-x"},{default:h((()=>[S(m,{size:"large",visibilityToggle:"",value:e.formData.password,"onUpdate:value":a[2]||(a[2]=a=>e.formData.password=a),placeholder:e.t("sys.login.password")},null,8,["value","placeholder"])])),_:1}),S(w,{class:"enter-x"},{default:h((()=>[S(u,{span:12},{default:h((()=>[S(i,null,{default:h((()=>[S(d,{checked:e.rememberMe,"onUpdate:checked":a[3]||(a[3]=a=>e.rememberMe=a),size:"small"},{default:h((()=>[L(_(e.t("sys.login.rememberMe")),1)])),_:1},8,["checked"])])),_:1})])),_:1}),S(u,{span:12},{default:h((()=>[S(i,{style:{"text-align":"right"}},{default:h((()=>[S(c,{type:"link",size:"small",onClick:a[4]||(a[4]=a=>e.setLoginState(e.LoginStateEnum.RESET_PASSWORD))},{default:h((()=>[L(_(e.t("sys.login.forgetPassword")),1)])),_:1})])),_:1})])),_:1})])),_:1}),S(i,{class:"enter-x"},{default:h((()=>[S(c,{type:"primary",size:"large",block:"",onClick:e.handleLogin,loading:e.loading},{default:h((()=>[L(_(e.t("sys.login.loginButton")),1)])),_:1},8,["onClick","loading"])])),_:1}),S(w,{class:"enter-x"},{default:h((()=>[S(u,{xs:24,md:8},{default:h((()=>[S(c,{block:"",onClick:a[5]||(a[5]=a=>e.setLoginState(e.LoginStateEnum.MOBILE))},{default:h((()=>[L(_(e.t("sys.login.mobileSignInFormTitle")),1)])),_:1})])),_:1}),S(u,{md:8,xs:24,class:"!my-2 !md:my-0 xs:mx-0 md:mx-2"},{default:h((()=>[S(c,{block:"",onClick:a[6]||(a[6]=a=>e.setLoginState(e.LoginStateEnum.QR_CODE))},{default:h((()=>[L(_(e.t("sys.login.qrSignInFormTitle")),1)])),_:1})])),_:1}),S(u,{md:7,xs:24},{default:h((()=>[S(c,{block:"",onClick:a[7]||(a[7]=a=>e.setLoginState(e.LoginStateEnum.REGISTER))},{default:h((()=>[L(_(e.t("sys.login.registerButton")),1)])),_:1})])),_:1})])),_:1})])),_:1},8,["model","rules","onKeypress"]),[[x,e.getShow]])],64)};export default P;
